<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Weed Breed ‚Äì Struktur‚ÄëBrowser</title>
  <style>
    :root { --bg:#0f1115; --panel:#151924; --panel-2:#1a1f2e; --txt:#e6e9f0; --muted:#9aa3b2; --accent:#6ee7b7; --accent-2:#60a5fa; --danger:#f87171; --ok:#34d399; --radius:14px; --gap:12px; }
    @media (prefers-color-scheme: light) { :root { --bg:#f6f8fc; --panel:#fff; --panel-2:#f2f4f8; --txt:#111827; --muted:#4b5563; } }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:radial-gradient(1200px 600px at 10% -10%, #1b2030 0%, var(--bg) 50%) fixed;color:var(--txt);font:14px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,"Helvetica Neue",Arial}

    /* Layout 25/75 */
    .app{display:grid;grid-template-columns:25% 75%;min-height:100dvh}

    /* Left: Pane with Ribbon + Tree */
    .browser{background:linear-gradient(180deg,var(--panel-2),var(--panel));border-right:1px solid #2b3243;padding:14px;position:sticky;top:0;align-self:start;height:100dvh;overflow:auto}
    .brand{display:flex;align-items:center;gap:10px;padding:10px;margin:0 0 8px}
    .logo{width:28px;height:28px;border-radius:8px;background:conic-gradient(from 45deg,var(--accent),var(--accent-2));box-shadow:0 0 0 2px #0005 inset}
    .brand h1{font-size:16px;margin:0}

    /* Ribbon (Tree Switcher) */
    .ribbon{display:flex;gap:6px;margin:6px 0 10px}
    .rbtn{flex:1;display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:8px 10px;border-radius:10px;border:1px solid #2b3243;background:transparent;color:var(--muted);cursor:pointer}
    .rbtn[aria-pressed="true"]{background:#ffffff14;color:var(--txt);border-color:#ffffff2a}

    .search{display:flex;gap:8px;margin:8px 0 6px}
    .search input{flex:1;padding:8px 10px;border-radius:10px;border:1px solid #2b3243;background:var(--panel-2);color:var(--txt)}
    .filters{display:flex;gap:6px;flex-wrap:wrap;margin-bottom:8px}
    .chip{padding:6px 8px;border-radius:999px;border:1px solid #2b3243;background:transparent;color:var(--muted);cursor:pointer}
    .chip[aria-pressed="true"]{background:#ffffff12;color:var(--txt)}

    /* Tree */
    .tree{list-style:none;margin:8px 0 0;padding:0}
    .node{display:flex;align-items:center;gap:8px;padding:8px;border-radius:10px;cursor:pointer;border:1px solid transparent}
    .node:hover{background:#ffffff0a;border-color:#ffffff12}
    .node[aria-selected="true"]{background:#ffffff12;border-color:#ffffff2a}
    .node .title{flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .badge{margin-left:auto;font-size:12px;padding:2px 8px;border-radius:999px;background:#ffffff12;color:var(--muted)}
    .children{margin-left:20px;border-left:1px dashed #2b3243;padding-left:8px}
    .twisty{width:14px;text-align:center;opacity:.8}

    /* Right: Content */
    main{padding:16px}
    .topbar{display:grid;grid-template-columns:1fr auto;gap:12px;align-items:center;margin-bottom:12px}
    .sim-controls{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
    .btn{display:inline-flex;align-items:center;gap:6px;padding:8px 10px;border-radius:10px;border:1px solid #2b3243;background:var(--panel-2);color:var(--txt);cursor:pointer}
    .btn.primary,.btn[aria-pressed="true"]{background:linear-gradient(180deg,#293145,#1d2333);border-color:#3b445e}
    .btn:disabled{opacity:.6;cursor:not-allowed}
    .clock{display:flex;align-items:center;gap:10px;padding:8px 12px;border-radius:12px;background:var(--panel-2);border:1px solid #2b3243}
    .clock .dot{width:8px;height:8px;border-radius:50%;background:var(--danger);box-shadow:0 0 0 4px #f8717122}
    .clock.running .dot{background:var(--ok);box-shadow:0 0 0 4px #34d39922}

    /* Balance chip (always visible) */
    .finance{display:flex;align-items:center;gap:8px;padding:8px 12px;border-radius:12px;background:var(--panel-2);border:1px solid #2b3243}
    .finance .label{color:var(--muted)}
    .finance .value{font-weight:600}

    /* Breadcrumbs */
    .crumbs{display:flex;gap:8px;align-items:center;margin:0 0 12px}
    .crumbs a{color:var(--txt);text-decoration:none;padding:6px 8px;border-radius:8px}
    .crumbs a:hover{background:#ffffff10}

    /* Cards & Tables */
    .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:var(--gap)}
    .card{grid-column:span 4;background:linear-gradient(180deg,#1a1f2e,#141827);padding:14px;border-radius:var(--radius);border:1px solid #2b3243}
    .card h3{margin:0 0 6px;font-size:13px;color:var(--muted)}
    .metric{display:flex;align-items:baseline;gap:10px}
    .metric .v{font-size:22px;font-weight:600}
    .row{display:flex;justify-content:space-between;gap:8px;margin-top:6px;color:var(--muted);font-size:12px}
    .section{background:var(--panel);border:1px solid #2b3243;border-radius:var(--radius);padding:14px;margin-bottom:12px}
    .section header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
    table{width:100%;border-collapse:collapse;font-size:13px}
    th,td{padding:10px 8px;border-bottom:1px dashed #2b3243;text-align:left}
    th{color:var(--muted)}
    tr:hover td{background:#ffffff06}

    /* Skeletons (charts/placeholders) */
    .skeleton{height:140px;border-radius:12px;background:linear-gradient(90deg,#20263a 25%,#262d43 37%,#20263a 63%);background-size:400% 100%;animation:shimmer 1.8s infinite}
    @keyframes shimmer{0%{background-position:100% 0}100%{background-position:-100% 0}}

    /* Responsive */
    @media (max-width:1100px){.app{grid-template-columns:100%}.browser{position:relative;height:auto}}
  </style>
</head>
<body>
  <div class="app">
    <!-- Left: Ribbon + Tree -->
    <aside class="browser" id="browser">
      <div class="brand"><div class="logo"></div><h1>Weed Breed</h1></div>
      <div class="ribbon" role="tablist" aria-label="Tree Auswahl">
        <button class="rbtn" id="rb-structure" data-mode="structure" aria-pressed="true">üèóÔ∏è Structure</button>
        <button class="rbtn" id="rb-company" data-mode="company" aria-pressed="false">üè¢ Company</button>
        <button class="rbtn" id="rb-shop" data-mode="shop" aria-pressed="false">üõí Shop</button>
      </div>
      <ul class="tree" id="tree" role="tree" aria-label="Explorer"><!-- built by JS --></ul>
    </aside>

    <!-- Right: Content -->
    <main>
      <div class="topbar">
        <div class="sim-controls" role="group" aria-label="Simulationssteuerung">
          <button class="btn" id="btn-step" title="1 Tick vor">‚è≠Ô∏è Schritt</button>
          <button class="btn primary" id="btn-play" title="Start">‚ñ∂ Start</button>
          <button class="btn" id="btn-pause" title="Pause" disabled>‚è∏ Pause</button>
          <span style="width:10px"></span>
          <button class="btn speed" data-speed="0.5" aria-pressed="false">0.5√ó</button>
          <button class="btn speed" data-speed="1" aria-pressed="true">1√ó</button>
          <button class="btn speed" data-speed="2" aria-pressed="false">2√ó</button>
          <button class="btn speed" data-speed="5" aria-pressed="false">5√ó</button>
        </div>
        <div style="display:flex; align-items:center; gap:10px;">
          <div id="clock" class="clock" aria-live="polite">
            <div class="dot"></div>
            <div>Tag <span id="day">1</span> ‚Ä¢ <span id="time">08:00</span> ‚Ä¢ Tick <span id="tick">0</span> ‚Ä¢ Œît <span id="tick-hours">3</span>h</div>
          </div>
          <div class="finance" title="Kontostand">
            <span class="label">Kontostand</span>
            <span class="value" id="balance-top">‚Äî</span>
          </div>
          <div class="finance" title="Energie pro Tag">
            <span class="label">Energie/Tag</span>
            <span class="value" id="daily-energy">‚Äî</span>
          </div>
          <div class="finance" title="Wasser pro Tag">
            <span class="label">Wasser/Tag</span>
            <span class="value" id="daily-water">‚Äî</span>
          </div>
        </div>
      </div>

      <nav class="crumbs" id="crumbs"><!-- breadcrumbs --></nav>
      <div id="content"><!-- dynamic content --></div>
    </main>
  </div>

  <script type="module" src="smoother.js"></script>
  <script type="module" src="format.js"></script>
  <script type="module" src="main.js"></script>
</body>
</html>
